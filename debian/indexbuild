#!/bin/sh

D=$1
shift
LIST=$1
shift

echo -n > $D

cat <<END >> $D
lpenz: Debian packages


% Google analytics
%!postproc: </BODY> <script type="text/javascript"> var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www."); document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E")); </script> <script type="text/javascript"> try { var pageTracker = _gat._getTracker("UA-4182011-2"); pageTracker._trackPageview(); } catch(err) {}</script></BODY>

To use the debian repository behind this page, add the following line in 
///etc/apt/sources.list//:

END
echo '```' >> $D
sed '/^$/d' $LIST >> $D
echo '```' >> $D

echo >> $D
echo 'If you really trust me, you can add the GPG key I sign the repository with by issuing:' >> $D
echo >> $D
echo '```' >> $D
echo 'wget -O - http://lpenz.github.com/lpenz_2010.asc | apt-key add -' >> $D
echo '```' >> $D

cat <<END >> $D

The following utilities are available in the repository:

END

for i in "$@"; do
	APP=$(sed -n 's/^Source: \(.*\)/\1/p' $i)
	DESCR=$(sed -n "/^Description:/,+1s/^ $APP \+- \(.*\)$/\1/p" $i)
	echo - [$APP http://www.github.com/lpenz/$APP]: $DESCR >> $D
done

cat <<END >> $D


They are all free software. Their source code can be found in
http://github.com/lpenz, along with other projects that are not debianizable.

END

